# 需求文檔

## 介紹

此功能旨在擴展現有的魚類資料系統，新增 iraraley 和 imowrod 兩個部落的飲食分類與處理方式資訊。這將讓使用者能夠了解不同部落對同一種魚類的不同處理方式和飲食文化差異，同時讓資料提供者能夠記錄和分享這些珍貴的文化知識。

### 系統規格

**支援部落：**

- ivalino
- iranmeilek
- imowrod
- iratay
- yayo
- iraraley

_註：目前優先調查 iraraley 和 imowrod 兩個部落_

**飲食分類選項：**

- oyod
- rahet
- 不分類
- 不食用
- ?（還不確定）
- '' (空值，表示尚未開始紀錄，為預設值)

**處理方式選項：**

- 去魚鱗
- 不去魚鱗
- 剝皮
- 不食用
- ?（還不確定）
- '' (空值，表示尚未開始紀錄，為預設值)

**調查紀錄功能：**

- 每筆部落飲食分類和處理方式資料都應包含備註欄位
- 備註欄位用於記錄調查過程、不同觀點、資料來源等文字紀錄
- 支援多次調查的歷史紀錄保存

**捕獲紀錄功能：**

- 每條魚類支援多筆捕獲紀錄
- 每筆捕獲紀錄包含：照片上傳、部落資訊、捕獲地點、捕獲方式
- 提供專門的捕獲紀錄頁面供使用者瀏覽
- 支援新增、編輯捕獲紀錄

**捕獲紀錄功能：**

- 每條魚類支援多筆捕獲紀錄
- 每筆捕獲紀錄包含：照片上傳、部落資訊、捕獲地點、捕獲方式
- 提供專門的捕獲紀錄頁面供使用者瀏覽
- 支援新增、編輯捕獲紀錄

## 需求

### 需求 1

**使用者故事：** 作為一個使用者，我想要查看魚類的部落飲食分類資訊，以便了解不同部落對這種魚的飲食文化。

#### 驗收標準

1. WHEN 使用者查看魚類詳細頁面 THEN 系統 SHALL 顯示該魚類的部落飲食分類資訊
2. WHEN 存在多個部落的資料 THEN 系統 SHALL 以清楚的方式區分不同部落的分類
3. WHEN 沒有部落飲食分類資料 THEN 系統 SHALL 顯示適當的提示訊息

### 需求 2

**使用者故事：** 作為一個使用者，我想要查看不同部落的魚類處理方式，以便學習傳統的處理技巧和方法。

#### 驗收標準

1. WHEN 使用者查看魚類詳細頁面 THEN 系統 SHALL 顯示該魚類的部落處理方式資訊
2. WHEN 存在多個處理方式 THEN 系統 SHALL 以結構化的方式呈現每種處理方式
3. WHEN 處理方式包含步驟 THEN 系統 SHALL 按順序顯示處理步驟

### 需求 3

**使用者故事：** 作為一個資料提供者，我想要新增魚類的部落飲食分類資訊，以便分享我所知道的文化知識。

#### 驗收標準

1. WHEN 資料提供者編輯魚類資料 THEN 系統 SHALL 提供選擇部落飲食分類的功能
2. WHEN 選擇飲食分類 THEN 系統 SHALL 提供所有部落的下拉選單（ivalino, iranmeilek, imowrod, iratay, yayo, iraraley）
3. WHEN 選擇分類選項 THEN 系統 SHALL 提供 oyod、rahet、不分類、不食用、?、'' 等選項
4. WHEN 儲存分類資料 THEN 系統 SHALL 將空值 '' 作為預設值處理
5. WHEN 分類資料儲存成功 THEN 系統 SHALL 顯示確認訊息

### 需求 4

**使用者故事：** 作為一個資料提供者，我想要新增魚類的部落處理方式資訊，以便記錄傳統的處理技巧。

#### 驗收標準

1. WHEN 資料提供者編輯魚類資料 THEN 系統 SHALL 提供選擇部落處理方式的功能
2. WHEN 選擇處理方式 THEN 系統 SHALL 提供所有部落的下拉選單（ivalino, iranmeilek, imowrod, iratay, yayo, iraraley）
3. WHEN 選擇處理選項 THEN 系統 SHALL 提供去魚鱗、不去魚鱗、剝皮、不食用、?、'' 等選項
4. WHEN 儲存處理方式資料 THEN 系統 SHALL 將空值 '' 作為預設值處理

### 需求 5

**使用者故事：** 作為一個使用者，我想要比較不同部落對同一種魚的處理方式差異，以便了解文化多樣性。

#### 驗收標準

1. WHEN 魚類有多個部落的資料 THEN 系統 SHALL 提供比較檢視功能
2. WHEN 使用者選擇比較模式 THEN 系統 SHALL 並排顯示不同部落的資訊
3. WHEN 比較資訊 THEN 系統 SHALL 清楚標示每個部落的名稱和對應資訊

### 需求 6

**使用者故事：** 作為一個系統管理員，我想要管理部落飲食分類和處理方式的資料品質，以便確保資訊的準確性。

#### 驗收標準

1. WHEN 管理員檢視資料 THEN 系統 SHALL 提供編輯和刪除功能
2. WHEN 刪除資料 THEN 系統 SHALL 要求確認操作
3. WHEN 資料被修改 THEN 系統 SHALL 記錄修改歷史
4. WHEN 資料有衝突 THEN 系統 SHALL 提供解決衝突的機制

### 需求 7

**使用者故事：** 作為一個使用者，我想要透過飲食分類搜尋魚類，以便找出所有部落中特定分類的魚種。

#### 驗收標準

1. WHEN 使用者搜尋特定飲食分類（如 oyod） THEN 系統 SHALL 列出所有部落中該分類的魚種
2. WHEN 搜尋結果顯示 THEN 系統 SHALL 清楚標示每條魚屬於哪個部落
3. WHEN 搜尋 rahet、不分類、不食用等分類 THEN 系統 SHALL 支援所有飲食分類選項的搜尋
4. WHEN 沒有符合條件的魚種 THEN 系統 SHALL 顯示無結果訊息

### 需求 8

**使用者故事：** 作為一個使用者，我想要透過部落和飲食分類的組合搜尋魚類，以便找出特定部落的特定分類魚種。

#### 驗收標準

1. WHEN 使用者選擇特定部落（如 iraraley）和飲食分類（如 oyod） THEN 系統 SHALL 列出該部落該分類的所有魚種
2. WHEN 使用者只選擇部落 THEN 系統 SHALL 列出該部落的所有魚種及其分類
3. WHEN 搜尋條件組合變更 THEN 系統 SHALL 即時更新搜尋結果
4. WHEN 搜尋結果為空 THEN 系統 SHALL 提供建議的替代搜尋條件

### 需求 9

**使用者故事：** 作為一個使用者，我想要透過處理方式搜尋魚類，以便找出特定處理方式的魚種。

#### 驗收標準

1. WHEN 使用者搜尋特定處理方式（如去魚鱗） THEN 系統 SHALL 列出所有部落中該處理方式的魚種
2. WHEN 使用者組合部落和處理方式搜尋 THEN 系統 SHALL 支援複合條件搜尋
3. WHEN 搜尋結果顯示 THEN 系統 SHALL 同時顯示魚種的飲食分類和處理方式資訊
4. WHEN 使用者清除搜尋條件 THEN 系統 SHALL 回到完整的魚類列表

### 需求 10

**使用者故事：** 作為一個資料提供者，我想要為每筆部落資料新增調查備註，以便記錄調查過程和不同觀點。

#### 驗收標準

1. WHEN 資料提供者編輯部落飲食分類或處理方式 THEN 系統 SHALL 提供備註欄位
2. WHEN 輸入備註內容 THEN 系統 SHALL 支援多行文字輸入
3. WHEN 儲存備註 THEN 系統 SHALL 記錄備註時間和輸入者資訊
4. WHEN 查看備註歷史 THEN 系統 SHALL 顯示所有歷史備註記錄
5. WHEN 備註內容過長 THEN 系統 SHALL 提供展開/收合功能

### 需求 11

**使用者故事：** 作為一個使用者，我想要查看魚類部落資料的調查備註，以便了解資料的來源和背景。

#### 驗收標準

1. WHEN 使用者查看魚類詳細頁面 THEN 系統 SHALL 顯示相關的調查備註
2. WHEN 存在多筆備註 THEN 系統 SHALL 按時間順序顯示備註
3. WHEN 備註包含調查者資訊 THEN 系統 SHALL 顯示調查者和調查時間
4. WHEN 沒有備註資料 THEN 系統 SHALL 顯示適當的提示訊息

### 需求 12

**使用者故事：** 作為一個使用者，我想要查看魚類的捕獲紀錄，以便了解這條魚的捕獲歷史和相關照片。

#### 驗收標準

1. WHEN 使用者查看魚類詳細頁面 THEN 系統 SHALL 提供查看捕獲紀錄的連結或按鈕
2. WHEN 使用者進入捕獲紀錄頁面 THEN 系統 SHALL 顯示該魚類的所有捕獲紀錄
3. WHEN 顯示捕獲紀錄 THEN 系統 SHALL 包含照片、部落、地點、捕獲方式、捕獲時間等資訊
4. WHEN 沒有捕獲紀錄 THEN 系統 SHALL 顯示適當的提示訊息

### 需求 13

**使用者故事：** 作為一個資料提供者，我想要新增魚類的捕獲紀錄，以便記錄捕獲的詳細資訊和照片。

#### 驗收標準

1. WHEN 資料提供者在捕獲紀錄頁面 THEN 系統 SHALL 提供新增捕獲紀錄的功能
2. WHEN 新增捕獲紀錄 THEN 系統 SHALL 要求上傳照片、選擇部落、輸入地點、選擇捕獲方式
3. WHEN 上傳照片 THEN 系統 SHALL 支援多種圖片格式（JPG、PNG、WEBP）
4. WHEN 選擇部落 THEN 系統 SHALL 提供所有部落的選項（ivalino, iranmeilek, imowrod, iratay, yayo, iraraley）
5. WHEN 儲存捕獲紀錄 THEN 系統 SHALL 驗證必要欄位已填寫
6. WHEN 捕獲紀錄儲存成功 THEN 系統 SHALL 顯示確認訊息並更新捕獲紀錄列表

### 需求 14

**使用者故事：** 作為一個資料提供者，我想要編輯已存在的捕獲紀錄，以便修正或補充捕獲資訊。

#### 驗收標準

1. WHEN 資料提供者查看捕獲紀錄 THEN 系統 SHALL 提供編輯功能
2. WHEN 編輯捕獲紀錄 THEN 系統 SHALL 允許修改照片、部落、地點、捕獲方式等資訊
3. WHEN 更新照片 THEN 系統 SHALL 支援替換現有照片
4. WHEN 儲存編輯 THEN 系統 SHALL 記錄修改歷史和修改者資訊
5. WHEN 編輯儲存成功 THEN 系統 SHALL 顯示確認訊息

### 需求 15

**使用者故事：** 作為一個使用者，我想要透過捕獲地點或部落搜尋魚類，以便找出特定地區的魚類捕獲紀錄。

#### 驗收標準

1. WHEN 使用者使用搜尋功能 THEN 系統 SHALL 支援按捕獲地點搜尋
2. WHEN 使用者選擇部落篩選 THEN 系統 SHALL 顯示該部落的所有捕獲紀錄
3. WHEN 搜尋結果顯示 THEN 系統 SHALL 包含魚類名稱、捕獲地點、捕獲時間等資訊
4. WHEN 點擊搜尋結果 THEN 系統 SHALL 導向該魚類的詳細頁面或捕獲紀錄

### 需求 16

**使用者故事：** 作為一個資料提供者，我想要批量更新魚類的部落資料，以便提高資料輸入效率。

#### 驗收標準

1. WHEN 資料提供者選擇多筆魚類資料 THEN 系統 SHALL 提供批量編輯功能
2. WHEN 進行批量編輯 THEN 系統 SHALL 允許同時設定多筆資料的部落分類和處理方式
3. WHEN 批量更新完成 THEN 系統 SHALL 顯示更新成功的魚類數量
4. WHEN 批量更新失敗 THEN 系統 SHALL 顯示失敗原因和受影響的資料
5. WHEN 批量編輯包含備註 THEN 系統 SHALL 允許為所有選中的魚類新增相同的備註
