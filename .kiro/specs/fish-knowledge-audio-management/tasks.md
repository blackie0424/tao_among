# Implementation Plan

- [x] 1. 設置後端路由和控制器基礎架構

  - 在 web.php 中新增進階知識和發音列表的路由定義
  - 建立 FishAudioController 控制器
  - 擴展 FishNoteController 新增知識列表相關方法
  - _Requirements: 1.1, 2.1, 4.1_

- [x] 2. 實作進階知識管理後端功能

  - [x] 2.1 實作進階知識列表頁面控制器方法

    - 建立 knowledgeList 方法顯示按分類分組的知識列表
    - 實作按 note_type 分組的資料處理邏輯
    - _Requirements: 1.2, 5.1, 5.2_

  - [x] 2.2 實作進階知識編輯功能

    - 建立 editKnowledge 方法顯示編輯表單
    - 實作 updateKnowledge 方法處理知識更新
    - 加入表單驗證和錯誤處理
    - _Requirements: 1.5, 3.2_

  - [x] 2.3 實作進階知識刪除功能
    - 建立 destroyKnowledge 方法處理軟刪除
    - 加入刪除確認和錯誤處理機制
    - _Requirements: 1.6, 3.3_

- [x] 3. 實作發音列表管理後端功能

  - [x] 3.1 實作發音列表頁面控制器方法

    - 建立 audioList 方法顯示發音列表
    - 整合音頻 URL 生成邏輯
    - _Requirements: 2.2, 2.3_

  - [x] 3.2 實作發音編輯功能

    - 建立 editAudio 方法顯示編輯表單
    - 實作 updateAudio 方法處理發音資料更新
    - 處理音頻檔案更新邏輯
    - _Requirements: 2.5, 3.2_

  - [x] 3.3 實作發音刪除功能
    - 建立 destroyAudio 方法處理軟刪除
    - 加入音頻檔案清理邏輯
    - _Requirements: 2.6, 3.3_

- [x] 4. 建立前端頁面組件

  - [x] 4.1 建立進階知識列表頁面

    - 建立 FishKnowledgeList.vue 頁面組件
    - 實作魚類資訊展示區塊
    - 實作按分類分組的知識列表顯示
    - 整合 FAB 按鈕和底部導航
    - _Requirements: 1.2, 5.1, 5.3, 4.1_

  - [x] 4.2 建立發音列表頁面

    - 建立 FishAudioList.vue 頁面組件
    - 實作發音列表展示和播放控制
    - 整合音頻播放狀態管理
    - _Requirements: 2.2, 2.4, 6.1, 6.2_

  - [x] 4.3 建立編輯表單頁面
    - 建立 EditFishNote.vue 編輯知識表單頁面
    - 建立 EditFishAudio.vue 編輯發音表單頁面
    - 實作表單驗證和提交邏輯
    - _Requirements: 1.5, 2.5, 4.3_

- [x] 5. 建立可重用的卡片組件

  - [x] 5.1 建立進階知識卡片組件

    - 建立 FishKnowledgeCard.vue 組件
    - 實作知識內容展示和操作選單
    - 加入編輯和刪除操作事件處理
    - _Requirements: 1.4, 1.5, 1.6, 3.1_

  - [x] 5.2 建立發音卡片組件
    - 建立 FishAudioCard.vue 組件
    - 實作音頻播放控制介面
    - 加入播放狀態視覺化指示
    - 實作編輯和刪除操作選單
    - _Requirements: 2.3, 2.4, 2.5, 2.6, 6.1, 6.2, 6.3_

- [x] 6. 更新底部導航系統

  - [x] 6.1 更新 BottomNavBar 組件

    - 在底部導航中新增進階知識和發音列表連結
    - 更新導航圖示和文字標籤
    - 實作當前頁面狀態指示
    - _Requirements: 4.1, 4.2_

  - [x] 6.2 更新魚類詳細頁面導航
    - 修改 Fish.vue 頁面的底部導航配置
    - 將原有的「新增知識」和「新增發音」按鈕改為「進階知識」和「發音列表」
    - _Requirements: 1.1, 2.1_

- [ ] 7. 實作音頻播放功能

  - [ ] 7.1 建立音頻播放服務

    - 建立 AudioPlayerService 管理音頻播放狀態
    - 實作播放、暫停、停止功能
    - 加入播放狀態事件監聽
    - _Requirements: 6.1, 6.2, 6.3_

  - [ ] 7.2 整合音頻播放到發音卡片
    - 在 FishAudioCard 中整合音頻播放控制
    - 實作播放狀態視覺化回饋
    - 處理多個音頻同時播放的邏輯
    - _Requirements: 2.4, 6.1, 6.3_

- [ ] 8. 實作資料分組和排序邏輯

  - [ ] 8.1 實作進階知識分類分組

    - 在後端實作按 note_type 分組的邏輯
    - 處理未分類知識的預設分組
    - 實作分類內容的排序機制
    - _Requirements: 5.1, 5.2, 5.3, 5.4_

  - [ ] 8.2 實作前端分組顯示
    - 在 FishKnowledgeList 中實作分組資料的渲染
    - 加入分類標題和分隔線
    - 實作空狀態的友善提示
    - _Requirements: 5.1, 5.3_

- [ ] 9. 加入錯誤處理和使用者回饋

  - [ ] 9.1 實作前端錯誤處理

    - 加入音頻播放失敗的錯誤處理
    - 實作網路請求失敗的重試機制
    - 加入表單驗證錯誤的即時回饋
    - _Requirements: 6.4, 6.5_

  - [ ] 9.2 實作後端錯誤處理
    - 加入統一的資源不存在處理
    - 實作檔案操作錯誤的容錯機制
    - 加入資料庫操作的事務保護
    - _Requirements: 3.3, 4.3_

- [ ] 10. 整合測試和優化

  - [ ] 10.1 建立前端組件測試

    - 為 FishKnowledgeCard 和 FishAudioCard 建立單元測試
    - 測試音頻播放功能和狀態管理
    - 驗證編輯和刪除操作的事件處理
    - _Requirements: 1.4, 1.5, 1.6, 2.3, 2.4, 2.5, 2.6_

  - [ ] 10.2 建立後端功能測試

    - 建立控制器方法的功能測試
    - 測試 CRUD 操作的完整流程
    - 驗證資料分組和排序邏輯
    - _Requirements: 1.1, 1.2, 1.5, 1.6, 2.1, 2.2, 2.5, 2.6_

  - [ ] 10.3 進行端到端整合測試
    - 測試從魚類詳細頁面到管理頁面的完整導航流程
    - 驗證音頻播放在不同瀏覽器的相容性
    - 測試響應式設計和觸控裝置操作
    - _Requirements: 4.1, 4.2, 6.1, 6.2_
